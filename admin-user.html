<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title> 砖转砖 - .住</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background: #111b21; color: white; font-family: sans-serif; padding: 20px; }
        .card { background: #202c33; border: 1px solid #333; color: white; margin-top: 20px; }
        .magic-link { background: #005c4b; padding: 10px; word-break: break-all; border-radius: 5px; cursor: pointer; }
    </style>
</head>
<body>
    <div class="container" style="max-width: 600px;">
        <h3 class="text-success mb-4">  注 注专转</h3>
        
        <div class="mb-3">
            <label>砖 注</label>
            <input id="u-name" class="form-control bg-dark text-white" placeholder="砖: 爪拽 ">
        </div>
        <div class="mb-3">
            <label>转驻拽/住祝</label>
            <input id="u-role" class="form-control bg-dark text-white" placeholder="砖:  住祝 专砖">
        </div>
        <div class="mb-3">
            <label>住驻专 转注转 转 (砖砖 拽 住)</label>
            <input id="u-id" class="form-control bg-dark text-white" placeholder="123456789">
        </div>
        <div class="mb-3">
            <label>转转 驻专驻 (拽砖专)</label>
            <input id="u-img" class="form-control bg-dark text-white" value="https://cdn-icons-png.flaticon.com/512/149/149071.png">
        </div>

        <button onclick="createUser()" class="btn btn-success w-100 py-3 fw-bold">爪专 注 拽 拽 </button>

        <div id="result" class="card p-3" style="display:none;">
            <h5 class="text-success">砖转砖 爪专 爪!</h5>
            <p>砖 注 转 拽  (  转 转):</p>
            <div id="link-box" class="magic-link" onclick="copyLink()"></div>
            <small class="text-muted mt-2 d-block">* 抓 注 拽 注转拽</small>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
        
        const db = getFirestore(initializeApp({ apiKey: "AIzaSyBGYsZylsIyeWudp8_SlnLBelkgoNXjU60", projectId: "app-saban94-57361", appId: "1:275366913167:web:f0c6f808e12f2aeb58fcfa" }));

        window.createUser = async () => {
            const id = document.getElementById('u-id').value;
            const data = {
                name: document.getElementById('u-name').value,
                role: document.getElementById('u-role').value,
                avatar: document.getElementById('u-img').value,
                active: true,
                createdAt: new Date()
            };

            if(!id) return alert('  转.');

            await setDoc(doc(db, "employees", id), data);
            
            //  转 砖 转 转转 转转 砖 驻拽爪 砖 拽 砖!
            const baseUrl = "https://your-server-url/saban-connect.html"; 
            const magicLink = `${baseUrl}?uid=${id}`;
            
            document.getElementById('result').style.display = 'block';
            document.getElementById('link-box').innerText = magicLink;
        };

        window.copyLink = () => {
            navigator.clipboard.writeText(document.getElementById('link-box').innerText);
            alert("拽 注转拽! 砖 转 爪祝 注.");
        };
    </script>
</body>
</html>
